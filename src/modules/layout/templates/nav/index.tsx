import { Suspense } from "react"
import { UserIcon } from "lucide-react";
import { listRegions } from "@lib/data"
import LocalizedClientLink from "@modules/common/components/localized-client-link"
import CartButton from "@modules/layout/components/cart-button"
import SideMenu from "@modules/layout/components/side-menu"

export default async function Nav() {
  const regions = await listRegions().then((regions) => regions)

  return (
		<header className="border-b py-4 mb-6">
			<div className="sm:items-center mx-auto flex max-w-7xl flex-col md:items-center lg:gap-2 gap-6 px-4 sm:flex-row sm:flex-wrap items-center sm:px-6 md:flex-nowrap lg:px-8">
        <nav className="txt-xsmall-plus text-ui-fg-subtle flex items-center justify-between w-full h-full text-small-regular">
          <div className="flex-1 basis-0 h-full flex items-center">
            <div className="h-full">
              <SideMenu regions={regions} />
            </div>
          </div>

          <div className="flex items-center h-full">
            <LocalizedClientLink
              href="/"
              className="txt-compact-xlarge-plus hover:text-ui-fg-base uppercase"
              data-testid="nav-store-link"
            >
    <svg
    className="block"
      width={169}
      height={62}
      viewBox="0 0 169 62"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M100.09 37.559a.757.757 0 00-.099.098 33.48 33.48 0 00-1.902 2.432 36.669 36.669 0 01-1.957 2.505c-.603.704-1.106 1.06-1.499 1.06-.201 0-.338-.383-.43-1.151-.164-1.29-.237-2.14-.237-2.57a26.973 26.973 0 00-.275-2.587c-.118-.814-.365-1.454-.722-1.91-.301-.357-.622-.54-.96-.54-.676 0-1.472.758-2.386 2.276a59.37 59.37 0 00-1.555 2.79c-1.728 3.153-2.788 4.735-3.163 4.735-.155-.036-.348-.411-.558-1.125-.503-1.636-.75-4.132-.75-7.47a.75.75 0 00.485.156c.1 0 .229-.028.375-.073 2.23-1.216 3.785-3.603 4.654-7.16.503-2.01.75-4.023.75-6.025 0-2.002-.202-3.648-.613-4.956-.503-1.536-1.271-2.304-2.304-2.304-.86 0-1.591.613-2.194 1.82-1.052 2.258-1.784 5.193-2.177 8.814-.393 3.63-.585 6.73-.585 9.3 0 .643.008 1.259.024 1.847l-1.196 1.58c-1.984 2.734-3.392 4.18-4.234 4.344h-.054c-.284 0-.512-.193-.677-.576-.174-.385-.283-.878-.33-1.482a28.705 28.705 0 01-.063-1.746c0-.722.027-1.426.082-2.121.037-.522.055-.979.055-1.39l-.027-.778c-.074-.896-.403-1.344-.997-1.344-.494 0-1.07.55-1.71 1.637l-.375.695c-.52-.283-1.023-.43-1.527-.43-1.5 0-2.761.96-3.776 2.872-.786 1.444-1.18 2.88-1.18 4.306 0 .43.046.832.138 1.207.21.786.594 1.18 1.143 1.18.804 0 1.82-.86 3.035-2.57a53.788 53.788 0 002.752-4.389c.43-.11.65-.383.65-.804l-.028-.247.293-.558c-.073.713-.11 1.573-.11 2.57 0 .676.018 1.362.055 2.066.201 2.313 1.043 3.474 2.541 3.474.915 0 1.912-.576 3.009-1.737 1.015-1.107 1.724-2.057 2.656-3.347.123 2.06.312 2.89.683 4.096.448 1.5 1.16 2.25 2.14 2.25.84 0 1.791-.869 2.843-2.597.53-.914 1.079-1.874 1.637-2.89 0-.035.009-.072.036-.109a.46.46 0 00.064-.164c1.143-2.104 1.93-3.374 2.359-3.804.192.54.357 1.673.485 3.402.055 1.289.201 2.432.457 3.428.247 1.006.777 1.572 1.573 1.719h.11c.804 0 1.6-.402 2.386-1.207.96-.997 1.81-2.057 2.542-3.163.092-.126.184-.25.275-.37l.363-2.965zM84.32 25.332c.448-3.09 1.06-5.44 1.847-7.04.21-.43.43-.732.64-.888l.164-.082c.229 0 .484.402.75 1.207.374 1.18.567 2.688.567 4.526a24.358 24.358 0 01-.732 5.596c-.768 3.109-2.04 5.147-3.83 6.107l-.129.083c.037-3.246.275-6.419.723-9.509zM71.682 37.73c-1.856 3.292-3.2 5.285-4.014 5.98a3.986 3.986 0 01-.055-.668c0-1.115.32-2.276.96-3.51.731-1.363 1.527-2.04 2.386-2.04.247 0 .494.083.723.238zM1.44 12.486H24.47v1.152H2.015v44.517h75.943v1.152H.863V13.062h.576v-.576zm143.352 0h23.607v46.821h-27.564v-1.152h26.412V13.638h-22.455v-1.152z"
        fill="#4D4D4D"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M108.802 43.512h-.055c-.283 0-.512-.192-.677-.576-.173-.384-.283-.877-.329-1.48a28.312 28.312 0 01-.064-1.748c0-.722.027-1.426.082-2.12.037-.522.055-.979.055-1.39l-.027-.778c-.074-.896-.403-1.344-.997-1.344-.494 0-1.07.549-1.71 1.637l-.374.694c-.522-.283-1.025-.43-1.527-.43-1.5 0-2.762.961-3.777 2.872-.786 1.445-1.18 2.88-1.18 4.307 0 .43.046.831.138 1.207.21.786.594 1.179 1.142 1.179.806 0 1.82-.86 3.036-2.569a53.498 53.498 0 002.752-4.389c.43-.11.65-.384.65-.805l-.028-.247.292-.557a26.109 26.109 0 00-.109 2.569c0 .677.018 1.362.055 2.067.201 2.313 1.042 3.474 2.542 3.474.379-.56.434-.897.11-1.573zm-4.902-5.714c-1.856 3.291-3.2 5.284-4.013 5.98a4.04 4.04 0 01-.055-.668c0-1.116.32-2.276.96-3.51.732-1.363 1.527-2.04 2.387-2.04.246 0 .493.082.721.238z"
        fill="#4D4D4D"
      />
      <path
        d="M98.478 24.02a.44.44 0 11-.148-.87c.057-.01 19.911-3.222 26.257-22.844a.44.44 0 11.839.27C118.913 20.712 98.537 24.01 98.478 24.02z"
        fill="#333"
      />
      <path
        d="M111.194 18.841a.44.44 0 11-.404-.784c.045-.023 15.489-8.206 32.875-.63a.441.441 0 01-.352.808c-16.996-7.407-32.076.583-32.119.606z"
        fill="#333"
      />
      <path
        d="M128.696 15.083a.44.44 0 11.248-.846c.014.004 4.615 1.32 8.212 7.794a.44.44 0 11-.77.428c-3.42-6.156-7.678-7.373-7.69-7.376zM115.659 24.907c-5.742.214-7.022-5.185-7.026-5.2h.001a.44.44 0 01.415-.547 6.784 6.784 0 014.256 1.321c1.127.833 2.096 2.083 2.745 3.816a.441.441 0 01-.391.61zm-5.987-4.856c.45 1.174 1.841 3.803 5.313 3.971-.569-1.26-1.336-2.19-2.205-2.833a5.867 5.867 0 00-3.108-1.138z"
        fill="#333"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M119.682 15.556s1.295 5.465 7.098 5.248c-1.421-3.81-4.321-5.327-7.098-5.248zM131.014 14.756s5.614.163 6.907-5.498c-4.048.386-6.264 2.795-6.907 5.498z"
        fill="#333"
      />
      <path
        d="M121.027 8.615a.44.44 0 01-.041-.621 6.78 6.78 0 013.864-2.22c1.378-.26 2.953-.12 4.665.583a.44.44 0 01.181.702c-3.676 4.268-8.472 1.665-8.669 1.556zm1.036-.47c1.165.468 4.038 1.238 6.526-1.193-1.311-.44-2.514-.512-3.576-.312a5.866 5.866 0 00-2.95 1.505z"
        fill="#333"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M114.255 16.112s2.949-4.78-1.307-8.731c-1.69 3.699-.712 6.822 1.307 8.73z"
        fill="#333"
      />
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M44.442 15.25c-.501.775.116 1.613.618 1.43 4.56-2.097 2.678-1.285 8.744-3.201-.32 4.287-.456 8.529-.456 13.82 0 1.87 0 3.876.046 6.11-3.922.137-7.8.411-12.269.822-.274.046-.365.364-.045.73.045.09.09.136.228.227 0 .046.045.092.045.092.365.228.73.364.958.273h.091c3.512.958 7.936 4.105 10.307 8.073.161.206.276.424.396.654.119.227.244.465.426.714 0 1.14.319 7.708.684 8.62 0 .016.004.03.01.046.01.03.02.06-.01.091.228.365.73.821 1.094.776.456-.046.73-1.642.73-3.467 0-1.96-.32-4.242-1.003-5.336l-.137-10.991 10.398-.138c.772 0 1.565.011 2.384.022.876.012 1.782.025 2.725.025.364 0 .547-.274.182-.64-.273-.41-.775-.729-1.14-.729h-3.466l-11.13.091c.004-.353.006-.704.008-1.052.04-6.105.075-11.357.723-19.426 3.01-.912 5.655-1.642 7.662-2.19 3.968-1.003 7.57-1.55 10.49-1.55 3.648 0 6.294.867 7.434 2.691.137.274.593.183.502-.365-.684-2.736-4.379-3.603-8.529-3.603-3.466 0-7.297.593-10.08 1.277l-.04.011c-1.867.501-4.404 1.181-7.12 2.042a.851.851 0 01.228-.456c.091-.183-.09-.639-.547-.867-.547-.365-.912-.365-1.14-.228-.274.456-.41 1.186-.548 2.19-5.974 1.915-5.667 1.816-9.453 3.412zm8.906 19.574c-2.736.09-5.701.273-8.62.547 3.74 1.824 6.887 4.606 8.711 7.115l-.09-7.662z"
        fill="#4D4D4D"
      />
      <path
        d="M130.322 61.604l.609-.163v-5.143l-.609-.152v-.314h3.805l-.102 1.582h-.415l-.102-1.166-1.867.091v2.16l1.542.031v.396l-1.542.03v2.435l1.958.101.142-1.186h.416l.031 1.602h-3.866v-.304zM122.537 61.604l.609-.163v-5.143l-.609-.152v-.314h2.424c.528 0 .924.122 1.188.365.27.244.406.676.406 1.298 0 .467-.112.85-.335 1.147a1.41 1.41 0 01-.893.547v.051a63.902 63.902 0 001.308 2.212l.549.112v.344h-1.127a60.9 60.9 0 00-.527-.983 57.33 57.33 0 01-.873-1.654h-.801v2.13l.649.142v.365h-1.968v-.304zm2.344-2.8c.27 0 .493-.08.669-.243.176-.163.264-.474.264-.934 0-.487-.064-.835-.193-1.044-.122-.21-.317-.315-.588-.315l-1.177.06v2.476h1.025zM116.131 62c-.467 0-.815-.136-1.045-.406-.223-.277-.335-.703-.335-1.278v-4.018l-.618-.152v-.314h1.968v.345l-.649.162v3.865c0 .447.057.754.172.923a.6.6 0 00.507.244c.149 0 .362-.037.639-.111.284-.082.626-.183 1.025-.305V56.34l-.649-.162v-.345h1.967v.314l-.618.152v5.143l.618.163v.304h-1.146l-.162-.547c-.44.19-.805.345-1.096.466-.29.115-.484.172-.578.172zM107.894 61.604l.639-.163V56.31l-1.217.04-.092 1.217h-.406l-.111-1.734h4.362l-.101 1.734h-.416l-.091-1.217-1.218-.04V61.4l.669.163v.344h-2.018v-.304zM100.608 62c-.467 0-.815-.136-1.045-.406-.223-.277-.335-.703-.335-1.278v-4.018l-.619-.152v-.314h1.969v.345l-.65.162v3.865c0 .447.058.754.173.923a.6.6 0 00.507.244c.149 0 .362-.037.639-.111.284-.082.626-.183 1.025-.305V56.34l-.649-.162v-.345h1.968v.314l-.619.152v5.143l.619.163v.304h-1.147l-.162-.547c-.439.19-.805.345-1.095.466-.291.115-.484.172-.579.172zM93.211 62c-1.684 0-2.525-.983-2.525-2.951 0-.88.107-1.572.324-2.08.122-.189.294-.379.517-.568.224-.19.444-.345.66-.466.223-.123.385-.183.487-.183.865 0 1.504.246 1.917.74.42.487.63 1.235.63 2.242a7.064 7.064 0 01-.316 2.11 2.645 2.645 0 01-.496.508 4.7 4.7 0 01-.68.467c-.23.121-.403.182-.518.182zm-.05-.496c.115 0 .3-.071.558-.213.256-.149.422-.28.496-.396.068-.21.126-.49.173-.842.054-.358.081-.747.081-1.167 0-.865-.122-1.521-.365-1.967-.236-.447-.653-.67-1.248-.67-.115 0-.25.024-.405.07a1.422 1.422 0 00-.417.214c-.182.129-.328.389-.435.781-.109.386-.163.896-.163 1.532 0 .697.061 1.238.183 1.623.128.386.318.656.567.812.25.149.575.223.975.223zM85.58 62c-.38 0-.718-.107-1.015-.324-.297-.223-.531-.555-.7-.994-.17-.44-.254-.97-.254-1.593 0-.44.028-.842.082-1.207a4.21 4.21 0 01.243-.913c.122-.189.294-.379.517-.568.224-.19.443-.345.66-.466.223-.123.386-.183.487-.183a33.439 33.439 0 011.663.111l-.101 1.583h-.416l-.101-1.045a4.943 4.943 0 00-.568-.07c-.25-.021-.437-.032-.558-.032-.163 0-.349.085-.558.254-.183.122-.328.375-.437.761-.108.38-.162.87-.162 1.471 0 .974.132 1.66.396 2.06.27.399.653.598 1.146.598h.73l.153-1.258.395.01v1.644a8.1 8.1 0 01-.77.101c-.4.04-.677.06-.832.06z"
        fill="#4D4D4D"
      />
    </svg>
            </LocalizedClientLink>
          </div>

          <div className="flex items-center gap-x-6 h-full flex-1 basis-0 justify-end">
            <div className="text-base-regular hidden small:flex items-center gap-x-6 h-full">
              {process.env.FEATURE_SEARCH_ENABLED && (
                <LocalizedClientLink
                  className="hover:text-ui-fg-base"
                  href="/search"
                  scroll={false}
                  data-testid="nav-search-link"
                >
                  Search
                </LocalizedClientLink>
              )}
              <LocalizedClientLink
                className="hover:text-ui-fg-base mb-2"
                href="/account"
                data-testid="nav-account-link"
              >
                <UserIcon />
              </LocalizedClientLink>
            </div>
            <Suspense
              fallback={
                <LocalizedClientLink
                  className="hover:text-ui-fg-base flex gap-2"
                  href="/cart"
                  data-testid="nav-cart-link"
                >
                  Cart (0)
                </LocalizedClientLink>
              }
            >
              <CartButton />
            </Suspense>
          </div>
        </nav>
        </div>
      </header>
  )
}
